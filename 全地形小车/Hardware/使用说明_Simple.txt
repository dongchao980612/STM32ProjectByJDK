========================================
  简单循迹控制 - 使用说明
========================================

一、文件说明
------------
1. Track_Simple.c  - 简单循迹控制代码（不用PID）
2. Track_Simple.h  - 头文件


二、如何使用
------------

在主函数中：

#include "Track_Simple.h"
#include "PWM.h"

int main(void)
{
    // 1. 初始化PWM（电机控制）
    PWM_Init();
    
    // 2. 初始化循迹传感器
    Simple_Track_Init();
    
    // 3. 启动定时器（建议10ms调用一次）
    // 在定时器中断函数中调用：
    // Simple_Track_Control();
    
    while(1)
    {
        // 如果不用定时器，也可以在主循环中调用
        Simple_Track_Control();
        
        // 添加适当延时（例如10ms）
        // Delay_ms(10);
    }
}


三、参数调整（在Track_Simple.c文件开头）
----------------------------------------

#define SPEED_STRAIGHT  4000   // 直行速度（改这个值调整直行快慢）
#define SPEED_TURN_FAST 3000   // 急转弯速度
#define SPEED_TURN_SLOW 2000   // 缓转弯速度

#define LEFT_WHEEL_OFFSET   200    // 左轮补偿
#define RIGHT_WHEEL_OFFSET  -200   // 右轮补偿

客户可以根据实际情况调整这些值：
- 数值范围：0 到 10000
- 值越大，速度越快
- 如果小车跑得太快，把所有速度都减小
- 如果转弯不够灵敏，增大 SPEED_TURN_FAST

【重要】如果小车直行时自己左转或右转：
- 小车左转（右轮快） → 增大 LEFT_WHEEL_OFFSET 或减小 RIGHT_WHEEL_OFFSET
- 小车右转（左轮快） → 减小 LEFT_WHEEL_OFFSET 或增大 RIGHT_WHEEL_OFFSET
- 根据客户反馈：右轮17，左轮13，所以设置了左轮+200，右轮-200


四、传感器说明
--------------

S1 S2 S3 S4 S5 S6 S7 S8  （从右到左）
          ↑  ↑
        中间传感器

- 0 = 检测到黑线
- 1 = 白色（没线）


五、控制逻辑
------------

1. 中间有线（S4、S5）→ 直行
2. 右侧有线（S2、S3）→ 向左转
3. 最右有线（S1）    → 向左急转
4. 左侧有线（S6、S7）→ 向右转
5. 最左有线（S8）    → 向右急转
6. 全白              → 继续前进（丢线）
7. 全黑              → 直行（路口）


六、手动测试函数
----------------

如果要手动测试电机，可以用这些函数：

Go_Forward(4000);    // 前进
Go_Backward(4000);   // 后退
Turn_Left(3000);     // 左转
Turn_Right(3000);    // 右转
Stop_Motor();        // 停止


七、修改建议
------------

如果客户想修改控制逻辑：

1. 找到 Simple_Track_Control() 函数
2. 修改 if-else 条件
3. 调整对应的 left_speed 和 right_speed 值

例如：想让右转更快，找到"偏左"的部分，
把 right_speed 的值改大即可。


八、常见问题
------------

Q: 小车还是偏一边？
A: 先调整文件开头的 LEFT_WHEEL_OFFSET 和 RIGHT_WHEEL_OFFSET
   如果还不行，可以在直行部分直接改：
   left_speed = SPEED_STRAIGHT - 500;  // 左轮慢一点
   right_speed = SPEED_STRAIGHT;

Q: 转弯不够快？
A: 增大 SPEED_TURN_FAST 或者让一个轮子倒转（代码里已经有）

Q: 怎么不用某些传感器？
A: 在代码里删掉或注释掉对应的if判断即可

Q: 怎么只用4个或6个传感器？
A: 例如只用中间4个（S3-S6）：
   把涉及 S1、S2、S7、S8 的if判断删掉或注释掉
   只保留 S3、S4、S5、S6 的判断

========================================

九、客户问题的专门优化
----------------------

根据客户反馈：右轮17，左轮13，小车左转

已经在代码中设置了补偿：
- LEFT_WHEEL_OFFSET = 200   （让左轮加速）
- RIGHT_WHEEL_OFFSET = -200  （让右轮减速）

如果测试后还是左转，可以增大这两个值：
- LEFT_WHEEL_OFFSET = 300 或 400
- RIGHT_WHEEL_OFFSET = -300 或 -400

直到左右轮速度接近相等为止。

========================================
